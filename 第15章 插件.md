# æ¦‚è¿°

@See https://cn.vuejs.org/guide/reusability/plugins.html

**æ’ä»¶**æ˜¯ä¸€ç§**ä¸º Vue æ·»åŠ å…¨å±€åŠŸèƒ½**çš„å·¥å…·ä»£ç ï¼Œå®ƒå¯ä»¥ **æ‰©å±• Vue åº”ç”¨çš„èƒ½åŠ›**ï¼Œæ¯”å¦‚æ³¨å†Œå…¨å±€ç»„ä»¶ã€æŒ‡ä»¤ã€æ–¹æ³•ç­‰ã€‚

> ğŸ“– **å¦‚ä½•å®‰è£…æ’ä»¶**

ä½¿ç”¨ app.use() æ–¹æ³•å®‰è£…æ’ä»¶ï¼š

```js
import { createApp } from 'vue'
import myPlugin from './my-plugin'

const app = createApp({})

app.use(myPlugin, { /* å¯é€‰çš„é€‰é¡¹ */ })
```

> ğŸ“– **æ’ä»¶çš„åŸºæœ¬ç»“æ„**

æ’ä»¶å¯ä»¥æ˜¯ï¼š

- ä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…å« install() æ–¹æ³•ã€‚

- ä¸€ä¸ªå‡½æ•°ï¼Œç›´æ¥ä½œä¸º install æ–¹æ³•ã€‚

1ï¼‰**ä½¿ç”¨å¯¹è±¡å®šä¹‰æ’ä»¶**

```js
const myPlugin = {
  install(app, options) {
    // é…ç½® Vue åº”ç”¨
    console.log('æ’ä»¶å·²å®‰è£…', options)
  }
}
```

2ï¼‰**ä½¿ç”¨å‡½æ•°å®šä¹‰æ’ä»¶**

```js
const myPlugin = (app, options) => {
  console.log('æ’ä»¶å·²å®‰è£…', options)
}
```

å®‰è£…æ—¶ï¼Œinstall æ–¹æ³•ä¼šæ¥æ”¶ï¼š

- appï¼šå½“å‰ Vue **åº”ç”¨å®ä¾‹**
- optionsï¼šä¼ é€’ç»™ app.use() çš„**é¢å¤–é€‰é¡¹**

> ğŸ“– **æ’ä»¶çš„å¸¸è§åº”ç”¨åœºæ™¯**

| **åŠŸèƒ½**               | **API æ–¹å¼**                  | **ç¤ºä¾‹**                                                     |
| ---------------------- | ----------------------------- | ------------------------------------------------------------ |
| **æ³¨å†Œå…¨å±€ç»„ä»¶**       | `app.component()`             | `app.component('MyComponent', MyComponent)`                  |
| **æ³¨å†Œå…¨å±€æŒ‡ä»¤**       | `app.directive()`             | `app.directive('focus', { mounted(el) { el.focus() } })`     |
| **æä¾›å…¨å±€æ•°æ®**       | `app.provide()`               | `app.provide('theme', 'dark')`                               |
| **æ·»åŠ å…¨å±€æ–¹æ³•æˆ–å±æ€§** | `app.config.globalProperties` | `app.config.globalProperties.$formatDate = (date) => { /* ... */ }` |
| **é›†æˆç¬¬ä¸‰æ–¹åº“**       | `app.use()`                   | `app.use(vueRouter)`                                         |

# æ’ä»¶ç¤ºä¾‹

## æ³¨å†Œå…¨å±€æŒ‡ä»¤

```js
const myPlugin = {
  install(app) {
    app.directive('focus', {
      mounted(el) {
        el.focus()
      }
    })
  }
}
```

åœ¨ç»„ä»¶ä¸­ä½¿ç”¨ï¼š

```vue
<input v-focus />
```

## æä¾›å…¨å±€æ•°æ®

```js
const myPlugin = {
  install(app) {
    app.provide('appName', 'My Awesome App')
  }
}
```

åœ¨ç»„ä»¶ä¸­ä½¿ç”¨ï¼š

```js
import { inject } from 'vue'

export default {
  setup() {
    const appName = inject('appName')
    console.log(appName) // è¾“å‡º "My Awesome App"
  }
}
```

## æ·»åŠ å…¨å±€æ–¹æ³•

```js
const myPlugin = {
  install(app) {
    app.config.globalProperties.$log = function (message) {
      console.log(`[LOG]: ${message}`)
    }
  }
}
```

åœ¨ç»„ä»¶ä¸­ä½¿ç”¨ï¼š

```vue
<script setup>
const logMessage = () => {
  // è®¿é—®å…¨å±€æ–¹æ³•
  this.$log('Hello Vue Plugin!')
}
</script>
```

